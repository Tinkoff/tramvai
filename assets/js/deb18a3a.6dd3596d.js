"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3466],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>f});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=o.createContext({}),s=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=s(e.components);return o.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),u=s(n),f=a,h=u["".concat(l,".").concat(f)]||u[f]||d[f]||r;return n?o.createElement(h,i(i({ref:t},p),{},{components:n})):o.createElement(h,i({ref:t},p))}));function f(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=u;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:a,i[1]=c;for(var s=2;s<r;s++)i[s]=n[s];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},7260:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>l,default:()=>f,frontMatter:()=>c,metadata:()=>s,toc:()=>d});var o=n(7462),a=n(3366),r=(n(7294),n(3905)),i=["components"],c={id:"how-create-action",title:"How to create an action?"},l=void 0,s={unversionedId:"how-to/how-create-action",id:"how-to/how-create-action",title:"How to create an action?",description:"Let's consider next case",source:"@site/tmp-docs/how-to/how-create-action.md",sourceDirName:"how-to",slug:"/how-to/how-create-action",permalink:"/tramvai/docs/how-to/how-create-action",draft:!1,editUrl:"https://github.com/Tinkoff/tramvai/-/edit/master/docs/get-started/overview.md/tmp-docs/how-to/how-create-action.md",tags:[],version:"current",frontMatter:{id:"how-create-action",title:"How to create an action?"},sidebar:"sidebar",previous:{title:"actions-execution",permalink:"/tramvai/docs/how-to/actions-execution"},next:{title:"How to split a component into an asynchronous chunk?",permalink:"/tramvai/docs/how-to/how-create-async-component"}},p={},d=[{value:"Create an action",id:"create-an-action",level:2},{value:"Run action for a specific page",id:"run-action-for-a-specific-page",level:2},{value:"What else is worth reading",id:"what-else-is-worth-reading",level:2}],u={toc:d};function f(e){var t=e.components,n=(0,a.Z)(e,i);return(0,r.kt)("wrapper",(0,o.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Let's consider next case: on our page we need to display information about interest on deposits. Wherein:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"these numbers change often and for the client we made a method in the API, into which we have to go for data."),(0,r.kt)("li",{parentName:"ul"},"we have SEO and we need to give this data in the HTML page")),(0,r.kt)("p",null,"We'll cover the following steps:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Creating an action"),(0,r.kt)("li",{parentName:"ol"},"Connection in the application")),(0,r.kt)("h2",{id:"create-an-action"},"Create an action"),(0,r.kt)("p",null,"Import ",(0,r.kt)("inlineCode",{parentName:"p"},"declareAction")," and write a function to load data from api and send data to store."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"import { declareAction } from '@tramvai/core';\nimport { loadDepositConfig } from './deposit/reducer';\n\nexport const loadDepositAction = declareAction({\n  name: 'load-deposit-config',\n  async fn() {\n    const data = await this.deps.apiClient.request({ method: 'deposit_config ' });\n    return this.dispatch(loadDepositConfig(data));\n  },\n  deps: {\n    apiClient: 'tinkoffApiClient',\n  },\n});\n")),(0,r.kt)("p",null,"We have created an action that requires the ",(0,r.kt)("inlineCode",{parentName:"p"},"tinkoffApiClient")," provider to work, this action makes a request for the data and saves the received data to the side."),(0,r.kt)("h2",{id:"run-action-for-a-specific-page"},"Run action for a specific page"),(0,r.kt)("p",null,"We have created an action and want to connect it to the application. It is important for us that the action is executed on the server, and the server is waiting for execution. In this case, the data is needed only on a specific page, so we add it to the static ",(0,r.kt)("inlineCode",{parentName:"p"},"actions")," field of the desired page."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"import react, { Component } from 'react';\nimport { loadDepositAction } from './loadDepositAction';\nimport { DepositInfo } from './DepositInfo';\n\nclass DepositPage extends Component {\n  static actions = [loadDepositAction];\n  render() {\n    return (\n      <div>\n        <DepositInfo />\n      </div>\n    );\n  }\n}\n")),(0,r.kt)("p",null,"After that, when the user opens the route, the server will automatically launch the action linked to DepositPage and the data will be loaded"),(0,r.kt)("h2",{id:"what-else-is-worth-reading"},"What else is worth reading"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/tramvai/docs/references/tramvai/core#declareAction"},"About declareAction")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/tramvai/docs/concepts/action"},"How do actions work"))))}f.isMDXComponent=!0}}]);