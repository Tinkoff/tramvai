"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8029],{3905:(e,t,i)=>{i.d(t,{Zo:()=>d,kt:()=>m});var n=i(7294);function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){a(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function l(e,t){if(null==e)return{};var i,n,a=function(e,t){if(null==e)return{};var i,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||(a[i]=e[i]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(a[i]=e[i])}return a}var s=n.createContext({}),p=function(e){var t=n.useContext(s),i=t;return e&&(i="function"==typeof e?e(t):r(r({},t),e)),i},d=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var i=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),u=p(i),m=a,f=u["".concat(s,".").concat(m)]||u[m]||c[m]||o;return i?n.createElement(f,r(r({ref:t},d),{},{components:i})):n.createElement(f,r({ref:t},d))}));function m(e,t){var i=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=i.length,r=new Array(o);r[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,r[1]=l;for(var p=2;p<o;p++)r[p]=i[p];return n.createElement.apply(null,r)}return n.createElement.apply(null,i)}u.displayName="MDXCreateElement"},2888:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>d,contentTitle:()=>s,default:()=>m,frontMatter:()=>l,metadata:()=>p,toc:()=>c});var n=i(7462),a=i(3366),o=(i(7294),i(3905)),r=["components"],l={sidebar_position:2},s=void 0,p={unversionedId:"references/cli/config",id:"references/cli/config",title:"config",description:"@tramvai/cli requires that in the project root should exists config file named tramvai.json. This config should define projects that @tramvai/cli should handle.",source:"@site/tmp-docs/references/cli/config.md",sourceDirName:"references/cli",slug:"/references/cli/config",permalink:"/docs/references/cli/config",draft:!1,editUrl:"https://github.com/Tinkoff/tramvai/-/edit/master/docs/get-started/overview.md/tmp-docs/references/cli/config.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"sidebar",previous:{title:"base",permalink:"/docs/references/cli/base"},next:{title:"start",permalink:"/docs/references/cli/start"}},d={},c=[{value:"config file format",id:"config-file-format",level:2},{value:"JSON schema validation and autocomplete in IDEs",id:"json-schema-validation-and-autocomplete-in-ides",level:2},{value:"Available options",id:"available-options",level:2},{value:"polyfill",id:"polyfill",level:3},{value:"output",id:"output",level:3},{value:"serverApiDir",id:"serverapidir",level:3},{value:"sourceMap",id:"sourcemap",level:3},{value:"modern",id:"modern",level:3},{value:"fileSystemPages",id:"filesystempages",level:3},{value:"splitChunks",id:"splitchunks",level:3},{value:"define",id:"define",level:3},{value:"postcss",id:"postcss",level:3},{value:"config",id:"config",level:4},{value:"cssLocalIdentName",id:"csslocalidentname",level:4},{value:"transpileOnlyModernLibs",id:"transpileonlymodernlibs",level:3},{value:"hotRefresh",id:"hotrefresh",level:3},{value:"dedupe",id:"dedupe",level:3},{value:"svgo",id:"svgo",level:3},{value:"imageOptimization",id:"imageoptimization",level:3},{value:"options",id:"options",level:4},{value:"cssMinimize",id:"cssminimize",level:3},{value:"webpack",id:"webpack",level:3},{value:"resolveAlias",id:"resolvealias",level:4},{value:"provide",id:"provide",level:4},{value:"checkAsyncTs",id:"checkasyncts",level:3},{value:"threadLoader",id:"threadloader",level:3},{value:"notifications",id:"notifications",level:3},{value:"experiments",id:"experiments",level:3},{value:"Add new config parameters",id:"add-new-config-parameters",level:2}],u={toc:c};function m(e){var t=e.components,i=(0,a.Z)(e,r);return(0,o.kt)("wrapper",(0,n.Z)({},u,i,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"@tramvai/cli")," requires that in the project root should exists config file named ",(0,o.kt)("inlineCode",{parentName:"p"},"tramvai.json"),". This config should define projects that ",(0,o.kt)("inlineCode",{parentName:"p"},"@tramvai/cli")," should handle."),(0,o.kt)("h2",{id:"config-file-format"},"config file format"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "projects": {\n    "react-app": {\n      "name": "new-app",\n      "root": "src",\n      "type": "application",\n      // other options\n    }\n  }\n}\n')),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"projects")," - map of the projects that resides in the current repository. ",(0,o.kt)("inlineCode",{parentName:"li"},"@tramvai/cli")," supports many apps and packages inside single repository (so called monorepo concept).")),(0,o.kt)("h2",{id:"json-schema-validation-and-autocomplete-in-ides"},"JSON schema validation and autocomplete in IDEs"),(0,o.kt)("p",null,"Link to the actual json schema for the ",(0,o.kt)("inlineCode",{parentName:"p"},"tramvai.json")," is ",(0,o.kt)("inlineCode",{parentName:"p"},"./node_modules/@tramvai/cli/schema.json")),(0,o.kt)("p",null,"The most simple way to add config validation and autocomplete is to add schema through field ",(0,o.kt)("inlineCode",{parentName:"p"},"$schema")," inside ",(0,o.kt)("inlineCode",{parentName:"p"},"tramvai.json"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "$schema": "./node_modules/@tramvai/cli/schema.json",\n  "projects": {}\n}\n')),(0,o.kt)("p",null,"Another way is to add schema to the IDE settings:"),(0,o.kt)("p",null,"How to add schema to the ",(0,o.kt)("strong",{parentName:"p"},"JetBrains IDE")," you can find in the ",(0,o.kt)("a",{parentName:"p",href:"https://www.jetbrains.com/help/idea/json.html#ws_json_schema_add_custom"},"official docs"),". You also need to set ",(0,o.kt)("inlineCode",{parentName:"p"},"tramvai.json")," as file path pattern in settings."),(0,o.kt)("p",null,"How to add schema to the ",(0,o.kt)("strong",{parentName:"p"},"VSCode")," you can find in the ",(0,o.kt)("a",{parentName:"p",href:"https://code.visualstudio.com/docs/languages/json#_json-schemas-and-settings"},"official docs")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"New projects generated by ",(0,o.kt)("inlineCode",{parentName:"p"},"tramvai new")," command already has field ",(0,o.kt)("inlineCode",{parentName:"p"},"$schema")," in their ",(0,o.kt)("inlineCode",{parentName:"p"},"tramvai.json")," config.")),(0,o.kt)("h2",{id:"available-options"},"Available options"),(0,o.kt)("h3",{id:"polyfill"},"polyfill"),(0,o.kt)("p",null,"Path to the polyfill file with all of the required polyfills. By default, file ",(0,o.kt)("inlineCode",{parentName:"p"},"postcss.config.js")," is used if it exists, otherwise polyfill bundle will not be generated"),(0,o.kt)("h3",{id:"output"},"output"),(0,o.kt)("p",null,"Specifies paths for the generated bundles."),(0,o.kt)("p",null,"For ",(0,o.kt)("inlineCode",{parentName:"p"},"type: application")," it's an object, and for other types it's a single string."),(0,o.kt)("h3",{id:"serverapidir"},"serverApiDir"),(0,o.kt)("p",null,"Path to folder with papi handlers"),(0,o.kt)("h3",{id:"sourcemap"},"sourceMap"),(0,o.kt)("p",null,"If sourcemaps are enabled"),(0,o.kt)("h3",{id:"modern"},"modern"),(0,o.kt)("p",null,"Enable build for modern browsers"),(0,o.kt)("h3",{id:"filesystempages"},"fileSystemPages"),(0,o.kt)("p",null,"See ",(0,o.kt)("a",{parentName:"p",href:"/docs/features/routing/file-system-pages"},"FileSystemPages doc")),(0,o.kt)("h3",{id:"splitchunks"},"splitChunks"),(0,o.kt)("p",null,"Configure the options on webpack splitChunks"),(0,o.kt)("h3",{id:"define"},"define"),(0,o.kt)("p",null,"Replaces passed strings with passed values in the build time for different environments"),(0,o.kt)("h3",{id:"postcss"},"postcss"),(0,o.kt)("p",null,"Postcss settings"),(0,o.kt)("h4",{id:"config"},"config"),(0,o.kt)("p",null,"Path to the postcss.config file"),(0,o.kt)("h4",{id:"csslocalidentname"},"cssLocalIdentName"),(0,o.kt)("p",null,"Specifies identifier for the css class names"),(0,o.kt)("h3",{id:"transpileonlymodernlibs"},"transpileOnlyModernLibs"),(0,o.kt)("p",null,"Transpile only part of node_modules that require transpilation. If option is disabled all of the node_modules are got transpiled"),(0,o.kt)("h3",{id:"hotrefresh"},"hotRefresh"),(0,o.kt)("p",null,"React hot-refresh"),(0,o.kt)("h3",{id:"dedupe"},"dedupe"),(0,o.kt)("p",null,"Controls the deduplication plugin"),(0,o.kt)("h3",{id:"svgo"},"svgo"),(0,o.kt)("p",null,"svgo-loader options"),(0,o.kt)("h3",{id:"imageoptimization"},"imageOptimization"),(0,o.kt)("p",null,"Config for the process of the image optimizations"),(0,o.kt)("h4",{id:"options"},"options"),(0,o.kt)("p",null,"For the detailed settings ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/tcoopman/image-webpack-loader#options"},"see")),(0,o.kt)("h3",{id:"cssminimize"},"cssMinimize"),(0,o.kt)("p",null,"Set minimizer for css"),(0,o.kt)("h3",{id:"webpack"},"webpack"),(0,o.kt)("p",null,"Webpack specific settings"),(0,o.kt)("h4",{id:"resolvealias"},"resolveAlias"),(0,o.kt)("p",null,'Browser package resolve aliases. E.g. { "stream": "stream-browserify" }'),(0,o.kt)("h4",{id:"provide"},"provide"),(0,o.kt)("p",null,'Browser packages to provide with ProvidePlugin. E.g. { "Buffer": ','["buffer", "Buffer"]'," }"),(0,o.kt)("h3",{id:"checkasyncts"},"checkAsyncTs"),(0,o.kt)("p",null,"Configuration for fork-ts-checker-webpack-plugin"),(0,o.kt)("h3",{id:"threadloader"},"threadLoader"),(0,o.kt)("p",null,"Config for the multithread build process (",(0,o.kt)("a",{parentName:"p",href:"https://webpack.js.org/loaders/thread-loader/"},"https://webpack.js.org/loaders/thread-loader/"),")."),(0,o.kt)("h3",{id:"notifications"},"notifications"),(0,o.kt)("p",null,"Control the build notifications that are showed during development"),(0,o.kt)("h3",{id:"experiments"},"experiments"),(0,o.kt)("p",null,"See ",(0,o.kt)("a",{parentName:"p",href:"/docs/references/cli/experiments"},"experiments doc")),(0,o.kt)("h2",{id:"add-new-config-parameters"},"Add new config parameters"),(0,o.kt)("p",null,"Config parameters for the ",(0,o.kt)("inlineCode",{parentName:"p"},"@tramvai/cli")," are stored as TypeScript interface from which JSON Schema is generating. This schema is used for the config validation and applying config defaults, thanks to the library ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/ajv-validator/ajv"},"ajv"),"."))}m.isMDXComponent=!0}}]);