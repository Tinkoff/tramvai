"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5477],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>m});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},c=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),d=p(a),m=r,f=d["".concat(s,".").concat(m)]||d[m]||u[m]||i;return a?n.createElement(f,l(l({ref:t},c),{},{components:a})):n.createElement(f,l({ref:t},c))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,l=new Array(i);l[0]=d;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,l[1]=o;for(var p=2;p<i;p++)l[p]=a[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},2344:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>m,frontMatter:()=>o,metadata:()=>p,toc:()=>u});var n=a(7462),r=a(3366),i=(a(7294),a(3905)),l=["components"],o={},s=void 0,p={unversionedId:"references/cli",id:"references/cli",title:"cli",description:"This package contains of next things:",source:"@site/tmp-docs/references/cli.md",sourceDirName:"references",slug:"/references/cli",permalink:"/docs/references/cli",draft:!1,editUrl:"https://github.com/Tinkoff/tramvai/-/edit/master/docs/get-started/overview.md/tmp-docs/references/cli.md",tags:[],version:"current",frontMatter:{},sidebar:"sidebar",previous:{title:"server",permalink:"/docs/references/tokens/server"},next:{title:"build",permalink:"/docs/references/tools/build"}},c={},u=[{value:"Installation",id:"installation",level:2},{value:"API",id:"api",level:2},{value:"Explanation",id:"explanation",level:2},{value:"How to",id:"how-to",level:2},{value:"Enable swc support in @tramvai/cli",id:"enable-swc-support-in-tramvaicli",level:3},{value:"Development",id:"development",level:2},{value:"Build",id:"build",level:3},{value:"Testing",id:"testing",level:3},{value:"VS code",id:"vs-code",level:3}],d={toc:u};function m(e){var t=e.components,a=(0,r.Z)(e,l);return(0,i.kt)("wrapper",(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"This package contains of next things:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"swc packages that is used by @tramvai/cli"),(0,i.kt)("li",{parentName:"ul"},"tramvai specific swc plugins")),(0,i.kt)("h2",{id:"installation"},"Installation"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"tramvai add --dev @tramvai/swc-integration\n")),(0,i.kt)("h2",{id:"api"},"API"),(0,i.kt)("p",null,"There is no public API for use in this package. It is used internally in @tramvai/cli."),(0,i.kt)("h2",{id:"explanation"},"Explanation"),(0,i.kt)("p",null,"This package exists only as a helper package to developers who want to test swc as a replacement of babel. By default, tramvai comes without it as swc integration requires a lot of code that is still experimental and is not required by most apps, but with this package you can easily add support for swc."),(0,i.kt)("p",null,"The main advantage of using swc over babel as a transpiler is speed - swc is much faster than babel for transpilation that implies faster builds and rebuilds in development and production modes."),(0,i.kt)("h2",{id:"how-to"},"How to"),(0,i.kt)("h3",{id:"enable-swc-support-in-tramvaicli"},"Enable swc support in @tramvai/cli"),(0,i.kt)("p",null,"Refer to docs of ",(0,i.kt)("a",{parentName:"p",href:"/docs/references/cli/experiments#transpilation"},(0,i.kt)("inlineCode",{parentName:"a"},"@tramvai/cli"))),(0,i.kt)("h2",{id:"development"},"Development"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://swc.rs/docs/plugin/ecmascript/getting-started"},"Swc doc")),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Install ",(0,i.kt)("a",{parentName:"li",href:"https://www.rust-lang.org/tools/install"},"Rust")),(0,i.kt)("li",{parentName:"ol"},"Run command ",(0,i.kt)("inlineCode",{parentName:"li"},"rustup target add wasm32-wasi")," to install required toolchain to build wasm targets."),(0,i.kt)("li",{parentName:"ol"},"Install clippy as additional tool for code check - ",(0,i.kt)("inlineCode",{parentName:"li"},"rustup component add clippy"))),(0,i.kt)("h3",{id:"build"},"Build"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"To build in dev mode i.e. for testing locally run ",(0,i.kt)("inlineCode",{parentName:"li"},"cargo build-wasi")),(0,i.kt)("li",{parentName:"ul"},"To build in prod mode i.e. for publish run ",(0,i.kt)("inlineCode",{parentName:"li"},"cargo build-wasi --release"))),(0,i.kt)("h3",{id:"testing"},"Testing"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"To run all tests for all plugins run ",(0,i.kt)("inlineCode",{parentName:"li"},"cargo test")," from the swc folder"),(0,i.kt)("li",{parentName:"ul"},"To run tests for single plugin either run ",(0,i.kt)("inlineCode",{parentName:"li"},"cargo test")," from plugin directory or run ",(0,i.kt)("inlineCode",{parentName:"li"},"cargo test <plugin_name>"))),(0,i.kt)("h3",{id:"vs-code"},"VS code"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Install ",(0,i.kt)("a",{parentName:"li",href:"https://marketplace.visualstudio.com/items?itemName=rust-lang.rust-analyzer"},"rust-analyzer extension")),(0,i.kt)("li",{parentName:"ol"},"To make the extension work do either of two:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Open ",(0,i.kt)("inlineCode",{parentName:"li"},"packages/swc")," directory as a separate project in Vs Code"),(0,i.kt)("li",{parentName:"ul"},"Add to ",(0,i.kt)("strong",{parentName:"li"},"workspace")," VsCode settings ",(0,i.kt)("inlineCode",{parentName:"li"},'"rust-analyzer.linkedProjects": ["<path_to_tramvai>/packages/swc/Cargo.toml"]')," - the value should be an absolute path to the ",(0,i.kt)("inlineCode",{parentName:"li"},"Cargo.toml")," file inside swc dir."))),(0,i.kt)("li",{parentName:"ol"},"It is desirable to set clippy as a checker for rust code. To do so set ",(0,i.kt)("inlineCode",{parentName:"li"},"clippy")," to setting ",(0,i.kt)("inlineCode",{parentName:"li"},"rust-analyzer.checkOnSave.command"))))}m.isMDXComponent=!0}}]);